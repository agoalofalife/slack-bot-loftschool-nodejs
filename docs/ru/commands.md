## Что такое `command`?

Команды чем-то похожи на [CLI](https://ru.wikipedia.org/wiki/%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%BE%D0%B9_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8) приложения, только для `slack`-чата.

?> Вы всегда можете прочитать больше в [оф. документации](https://api.slack.com/slash-commands).

Допустим, нужно обособить какие-то действия.

Например, в `slack` есть такие встроенные команды, как:
- `/topic` изменение темы в `channel`.
- `/remind` напоминание через определенный промежуток времени.

При вводе команды в `slack`, на сервер отправляется `HTTPS` запрос, это и будет призывом к действию

Создадим команду через приложение.


## Создание команды

Переходим в приложение и нажимаем кнопку создать **команду**.

<img src="/images/create-command.jpg">

Далее нужно заполнить необходимые поля:
- Название вашей команды.
- Адрес в сети, куда будет приходить `https` запрос. В данном случае, сервера нет, пробрасываем в сеть через `ngrok`.
- Описание

!> **Обратите внимание** чтобы разграничить зону запросов, после хоста добавляется префикс `/commands`.
Например `https://host.com/commands`.

<img src="/images/command-create-prew.jpg">

После создания команды, на адрес который мы указали, будет приходить запросы.

Рассмотрим, как обрабатывать команды.

Нужно написать примерно следующее:

```javascript
// listen event 'command'
bot.on('command', async (route, response) => {
    route('/time', (responseInitiator, classCommand) => {
        response.json({
            "text": "Time is " + (new Date).toLocaleString(),
        });
    });
});
```

Это очень похоже на обычные сообщение, за исключением того, что:
- Событие имеет название `command`.
- В `route` указывается название вашей команды.
- Ответ происходит через объект `response`.

Эта схема хорошо работает, когда есть возможность произвести ответ в течение 3 секунд.

В случае, когда выполнение операции занимает больше времени, стоит воспользоваться параметром `response_url`.
Где-то его сохранить, и отправить в течение получаса.